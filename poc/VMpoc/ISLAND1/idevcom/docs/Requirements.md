# Islands Dev Chat User requirements

##### Introduction

The ultimate goal is to create a simple and secure system, where users will be able to communicate with each other via text chat, share snippets of code, exchange pictures and other types of files, do audio and video calls via WebRTC protocol and share each other screen.


##### Authentication
The system should not have a traditional username/password authntication. Any user should be able to have as many identites as hi/she wishes. Any user, who came onto landing page should be able to create a room and invite other people to participate in the conversation.

###### Key points about authentication:
* No traditional login/password accounting
* Any anonymous user is able to create a room without any preliminary registration/authentication
* During the room creation an unique url and private key will be generated by the system.
* Those url and private key will be required to access newly created room in the future. 
* It will be user's responsibility to keep the url and the private key safely.
* The creater of a room is set as an owner, and is able to invite other users by generating invitation key and sharing the room's unique url.
* In order to join the room, an invitees should follow the url provided, and where prompted, enter an invatation key, shared by the room's owner. Private key will be generated for invitee at the end of the process.




##### Chat Rooms
Chat rooms should have following elements
* List of all the users with access rights
* Chat window where user can see the conversation
* New message text area and "Send" button, where user can type a new message and send it by pressing Ctrl+Enter or clicking "Send" button.
* There should be also buttons for enabling video, audio and screen sharing.



##### Encryption and security
* Room access will be maintained by issuing private keys for every user with access rights to a particular room. 
* Each room should have an unique URL, which will serve as a public key.
* All the traffic between client and server should be encrypted
* Encryption should happen on the client site, such that server has no access to unencrypted data
* Chat history must be kept in the encrypted files on disk.
* User A should not have access to an unencrypted chat history file of User B, instead User A should have his own version of chat history encrypted with his/her public key.
* If a user has lost his private key to a particular room - the access cannot be regained and chat history cannot be recovered.



##### Interface
System interface should consist of following pages:

* Landing page

![Landing.png](https://github.com/viocost/islands/raw/master/poc/idevcom/docs/mockups/Landing.png)

* Chat room page

![chat_window.png](https://github.com/viocost/islands/raw/master/poc/idevcom/docs/mockups/chat_window.png)


* Room authentication page / room not found

![room_authentication.png](https://github.com/viocost/islands/raw/master/poc/idevcom/docs/mockups/room_authentication.png)

![room_not_found.png](https://github.com/viocost/islands/raw/master/poc/idevcom/docs/mockups/room_not_found.png)


* Room settings: only for the owner of the room


![settings.png](https://github.com/viocost/islands/raw/master/poc/idevcom/docs/mockups/settings.png)



##### Chat functionality
* Users should be able to exchange text messages
* If an image inserted into new message field, it should be processed and on send appear on the chat window
* There must be a timestamp for each message
* If no video is enabled, chat are must take the most amount of screen
* If video is enabled - chat window should compress under video
* miniature videos should be underneath of main video
* On click miniature video should change places with main video
* If user is sharing the screen and the video is enabled, the screen share has higher priority, although user should be able to switch back and forth between video and screen share by clicking on my video window
* User should be able to enable/disable audio and video streams
* User should be able to go offline or become invisible by clicking appropriate buttons
* The last session state must be saved
* If a user surrounds a part of a message with \`\`\` (3 backticks), the surrounded text should appear as a code snippet

##### Message handling
Every message must be encrypted on the client side. Server should not see any unencrypted data at all.
![message_handling.png](https://github.com/viocost/islands/raw/master/poc/idevcom/docs/mockups/Message%20handling.png)

##### Chat history


